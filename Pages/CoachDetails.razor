@page "/coach-details/{id}"
@inject CoachService CoachService

<div class="container py-5">
    @if (Coach == null)
    {
        <p class="text-center">Loading coach details...</p>
    }
    else if (Coach.Data == null)
    {
        <p class="text-center text-danger">Coach not found.</p>
    }
    else
    {
        <div class="text-center mb-5">
            <img src="@GetImage(Coach.Data.ProfilePictureUrl)"
                 class="rounded-circle mb-3"
                 style="width: 150px; height: 150px; object-fit: cover;"
                 alt="Coach Image" />

            <h3 class="fw-bold">Coach @Coach.Data.FullName</h3>
            <p class="text-muted w-75 mx-auto">@Coach.Data.Bio</p>
        </div>

        <div class="d-flex justify-content-end mb-4">
            <select class="form-select w-auto">
                <option selected>Group</option>
                <option>Private</option>
            </select>
        </div>

        <div class="row g-4">
            @for (int i = 0; i < 4; i++)
            {
                <div class="col-md-3">
                    <div class="card h-100 text-center border border-primary rounded-4 package-card transition">
                        <div class="card-body d-flex flex-column justify-content-between">
                            <div>
                                <h5 class="card-title fw-bold">Yoga</h5>
                                <p class="text-primary text-decoration-underline">4 session / week</p>
                                <p class="fw-bold mb-1">500 EGP</p>
                                <p class="fw-bold">session duration : 45 min</p>
                                <p class="card-text small text-muted">
                                    A Hindu spiritual and ascetic discipline, including breath control, meditation, and postures, practiced for health and relaxation.
                                </p>
                            </div>
                            <div>
                                <button class="btn btn-primary w-100 mt-3">
                                    Subscribe Now
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
</div>

<style>
    .package-card {
        background-color: #f8f9fa;
        transition: all 0.3s ease-in-out;
    }

        .package-card:hover {
            background-color: #e3eafc;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);
            transform: translateY(-5px);
        }
</style>

@code {
    [Parameter]
    public string Id { get; set; } = null!;

    private ApiResponse<CoachDetailsDto>? Coach;

    protected override async Task OnInitializedAsync()
    {
        Coach = await CoachService.GetCoachByIdAsync(Id);
    }

    private string GetImage(string? url) =>
        string.IsNullOrWhiteSpace(url) ? "images/Default.png" : url;
}
